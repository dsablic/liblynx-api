{
  "$schema": "http://interagent.github.io/interagent-hyper-schema",
  "type": [
    "object"
  ],
  "definitions": {
    "account": {
      "$schema": "http://json-schema.org/draft-04/hyper-schema",
      "title": "Account",
      "description": "",
      "stability": "production",
      "strictProperties": true,
      "type": [
        "object"
      ],
      "definitions": {
        "id": {
          "description": "unique identifier of account",
          "readOnly": true,
          "type": [
            "integer"
          ]
        },
        "account_name": {
          "description": "unique name of account",
          "type": [
            "string"
          ]
        },
        "email_domains": {
          "description": "cr separated email domains",
          "example": "*.somedomain.com\nalt.somedomain2.com",
          "type": [
            "string"
          ]
        },
        "enable_saml": {
          "description": "saml enabled",
          "type": [
            "boolean"
          ]
        },
        "enable_shibboleth": {
          "description": "shibboleth enabled",
          "type": [
            "boolean"
          ]
        },
        "identity": {
          "$ref": "#/definitions/account/definitions/id"
        },
        "creation_date": {
          "description": "when account was created",
          "readOnly": true,
          "format": "date-time",
          "type": [
            "string"
          ]
        },
        "modified_date": {
          "description": "when account was updated",
          "readOnly": true,
          "format": "date-time",
          "type": [
            "string"
          ]
        },
        "publisher_reference": {
          "description": "publisher reference",
          "type": [
            "string"
          ]
        },
        "shibboleth_entity_id": {
          "description": "shibboleth entity id",
          "format": "uri",
          "type": [
            "string"
          ]
        }
      },
      "links": [
        {
          "description": "Create a new account.",
          "href": "/api/accounts",
          "method": "POST",
          "rel": "create",
          "schema": {
            "properties": {
              "account_name": {
                "$ref": "#/definitions/account/definitions/account_name"
              },
              "publisher_reference": {
                "$ref": "#/definitions/account/definitions/publisher_reference"
              },
              "email_domains": {
                "$ref": "#/definitions/account/definitions/email_domains"
              },
              "enable_saml": {
                "$ref": "#/definitions/account/definitions/enable_saml"
              },
              "enable_shibboleth": {
                "$ref": "#/definitions/account/definitions/enable_shibboleth"
              },
              "shibboleth_entity_id": {
                "$ref": "#/definitions/account/definitions/shibboleth_entity_id"
              }
            },
            "required": [
              "account_name"
            ],
            "type": [
              "object"
            ]
          },
          "title": "Create"
        },
        {
          "description": "Delete an existing account.",
          "href": "/api/accounts/{(%23%2Fdefinitions%2Faccount%2Fdefinitions%2Fidentity)}",
          "method": "DELETE",
          "rel": "destroy",
          "title": "Delete",
          "targetSchema": {
          }
        },
        {
          "description": "Info for existing account.",
          "href": "/api/accounts/{(%23%2Fdefinitions%2Faccount%2Fdefinitions%2Fidentity)}",
          "method": "GET",
          "rel": "self",
          "title": "Info"
        },
        {
          "description": "List existing accounts.",
          "href": "/api/accounts",
          "method": "GET",
          "rel": "instances",
          "targetSchema": {
            "properties": {
              "accounts": {
                "properties": {
                  "id": {
                    "$ref": "#/definitions/account/definitions/id"
                  },
                  "account_name": {
                    "$ref": "#/definitions/account/definitions/account_name"
                  },
                  "publisher_reference": {
                    "$ref": "#/definitions/account/definitions/publisher_reference"
                  },
                  "email_domains": {
                    "$ref": "#/definitions/account/definitions/email_domains"
                  },
                  "enable_saml": {
                    "$ref": "#/definitions/account/definitions/enable_saml"
                  },
                  "enable_shibboleth": {
                    "$ref": "#/definitions/account/definitions/enable_shibboleth"
                  }
                },
                "type": [
                  "array"
                ]
              }
            }
          },
          "title": "List"
        },
        {
          "description": "Update an existing account.",
          "href": "/api/accounts/{(%23%2Fdefinitions%2Faccount%2Fdefinitions%2Fidentity)}",
          "method": "PUT",
          "rel": "update",
          "schema": {
            "properties": {
              "account_name": {
                "$ref": "#/definitions/account/definitions/account_name"
              },
              "publisher_reference": {
                "$ref": "#/definitions/account/definitions/publisher_reference"
              },
              "email_domains": {
                "$ref": "#/definitions/account/definitions/email_domains"
              },
              "enable_saml": {
                "$ref": "#/definitions/account/definitions/enable_saml"
              },
              "enable_shibboleth": {
                "$ref": "#/definitions/account/definitions/enable_shibboleth"
              },
              "shibboleth_entity_id": {
                "$ref": "#/definitions/account/definitions/shibboleth_entity_id"
              }
            },
            "type": [
              "object"
            ]
          },
          "title": "Update"
        }
      ],
      "properties": {
        "created_at": {
          "$ref": "#/definitions/account/definitions/creation_date"
        },
        "id": {
          "$ref": "#/definitions/account/definitions/id"
        },
        "name": {
          "$ref": "#/definitions/account/definitions/account_name"
        },
        "publisher_reference": {
          "$ref": "#/definitions/account/definitions/publisher_reference"
        },
        "enable_saml": {
          "$ref": "#/definitions/account/definitions/enable_saml"
        },
        "enable_shibboleth": {
          "$ref": "#/definitions/account/definitions/enable_shibboleth"
        },
        "email_domains": {
          "$ref": "#/definitions/account/definitions/email_domains"
        },
        "updated_at": {
          "$ref": "#/definitions/account/definitions/modified_date"
        },
        "shibboleth_entity_id": {
          "$ref": "#/definitions/account/definitions/shibboleth_entity_id"
        }
      }
    },
    "identification": {
      "$schema": "http://json-schema.org/draft-04/hyper-schema",
      "title": "Identification",
      "description": "",
      "stability": "production",
      "strictProperties": true,
      "type": [
        "object"
      ],
      "definitions": {
        "id": {
          "description": "unique identifier of identification",
          "readOnly": true,
          "format": "uuid",
          "type": [
            "string"
          ]
        },
        "identity": {
          "$ref": "#/definitions/identification/definitions/id"
        },
        "created": {
          "description": "when identification was created",
          "format": "date-time",
          "type": [
            "string"
          ]
        },
        "email": {
          "description": "user email address",
          "format": "email",
          "type": [
            "string"
          ]
        },
        "url": {
          "description": "callback url",
          "format": "uri",
          "type": [
            "string"
          ]
        },
        "ip": {
          "description": "ip address",
          "format": "ipv4",
          "type": [
            "string"
          ]
        },
        "user_agent": {
          "description": "user agent",
          "type": [
            "string"
          ]
        }
      },
      "links": [
        {
          "description": "create a new identification resource to try and identify an account to link a new session with",
          "href": "/api/identifications",
          "method": "POST",
          "rel": "create",
          "schema": {
            "properties": {
              "email": {
                "$ref": "#/definitions/identification/definitions/email"
              },
              "ip": {
                "$ref": "#/definitions/identification/definitions/ip"
              },
              "user_agent": {
                "$ref": "#/definitions/identification/definitions/user_agent"
              },
              "url": {
                "$ref": "#/definitions/identification/definitions/url"
              }
            },
            "required": [
              "ip",
              "user_agent",
              "url"
            ],
            "type": [
              "object"
            ]
          },
          "title": "Create"
        },
        {
          "description": "retrieve a single identification object",
          "href": "/api/identifications/{(%23%2Fdefinitions%2Fidentification%2Fdefinitions%2Fidentity)}",
          "method": "GET",
          "rel": "self",
          "title": "Info"
        }
      ],
      "properties": {
        "created": {
          "$ref": "#/definitions/identification/definitions/created"
        },
        "id": {
          "$ref": "#/definitions/identification/definitions/id"
        }
      }
    },
    "samlidp": {
      "$schema": "http://json-schema.org/draft-04/hyper-schema",
      "title": "Samlidp",
      "description": "",
      "stability": "production",
      "strictProperties": true,
      "type": [
        "object"
      ],
      "definitions": {
        "id": {
          "description": "unique identifier of samlidp",
          "readOnly": true,
          "type": [
            "integer"
          ]
        },
        "descriptor_url": {
          "description": "saml descriptor url",
          "readOnly": true,
          "type": [
            "string"
          ]
        },
        "identity": {
          "$ref": "#/definitions/samlidp/definitions/id"
        }
      },
      "links": [
        {
          "description": "Create a new samlidp.",
          "href": "/api/accounts/{(%23%2Fdefinitions%2Faccount%2Fdefinitions%2Fidentity)}/samlidps",
          "method": "POST",
          "rel": "create",
          "schema": {
            "properties": {
            },
            "type": [
              "object"
            ]
          },
          "title": "Create"
        },
        {
          "description": "Delete an existing samlidp.",
          "href": "/api/accounts/{(%23%2Fdefinitions%2Faccount%2Fdefinitions%2Fidentity)}/samlidps/{(%23%2Fdefinitions%2Fsamlidp%2Fdefinitions%2Fidentity)}",
          "method": "DELETE",
          "rel": "destroy",
          "title": "Delete"
        },
        {
          "description": "Info for existing samlidp.",
          "href": "/api/accounts/{(%23%2Fdefinitions%2Faccount%2Fdefinitions%2Fidentity)}/samlidps/{(%23%2Fdefinitions%2Fsamlidp%2Fdefinitions%2Fidentity)}",
          "method": "GET",
          "rel": "self",
          "title": "Info"
        },
        {
          "description": "List existing samlidps.",
          "href": "/api/accounts/{(%23%2Fdefinitions%2Faccount%2Fdefinitions%2Fidentity)}/samlidps",
          "method": "GET",
          "rel": "instances",
          "title": "List"
        }
      ],
      "properties": {
        "id": {
          "$ref": "#/definitions/samlidp/definitions/id"
        },
        "descriptor_url": {
          "$ref": "#/definitions/samlidp/definitions/descriptor_url"
        }
      }
    },
    "token": {
      "$schema": "http://json-schema.org/draft-04/hyper-schema",
      "title": "OAuth2 token",
      "description": "",
      "stability": "production",
      "strictProperties": true,
      "type": [
        "object"
      ],
      "definitions": {
        "account_token": {
          "description": "unique identifier of identification",
          "readOnly": true,
          "type": [
            "string"
          ]
        },
        "identity": {
          "$ref": "#/definitions/token/definitions/account_token"
        },
        "grant_type": {
          "description": "grant_type",
          "example": "client_credentials",
          "type": [
            "string"
          ]
        }
      },
      "links": [
        {
          "description": "Create a new oauth2 token",
          "encType": "application/x-www-form-urlencoded",
          "href": "/oauth/v2/token",
          "method": "POST",
          "rel": "create",
          "schema": {
            "properties": {
              "grant_type": {
                "$ref": "#/definitions/token/definitions/grant_type"
              }
            },
            "type": [
              "object"
            ]
          },
          "targetSchema": {
            "properties": {
              "account_token": {
                "$ref": "#/definitions/token/definitions/account_token"
              }
            },
            "type": [
              "object"
            ]
          },
          "title": "Create"
        }
      ],
      "properties": {
        "account_token": {
          "$ref": "#/definitions/token/definitions/account_token"
        },
        "grant_type": {
          "$ref": "#/definitions/token/definitions/grant_type"
        }
      }
    }
  },
  "properties": {
    "account": {
      "$ref": "#/definitions/account"
    },
    "identification": {
      "$ref": "#/definitions/identification"
    },
    "samlidp": {
      "$ref": "#/definitions/samlidp"
    },
    "token": {
      "$ref": "#/definitions/token"
    }
  },
  "description": "LibLynx API schema",
  "id": "http://connect.liblynx.com/schema#",
  "links": [
    {
      "href": "https://connect.liblynx.com",
      "rel": "self"
    }
  ],
  "title": "LibLynx API"
}
